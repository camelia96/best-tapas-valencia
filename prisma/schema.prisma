generator client {
  provider = "prisma-client-js"
  previewFeatures = ["fullTextSearchPostgres"]
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bars {
  id                   Int                    @id(map: "bar_pkey") @default(autoincrement()) @db.SmallInt
  created_at           DateTime               @default(now()) @db.Timestamptz(6)
  name                 String                 @db.VarChar
  direction            String?                @db.VarChar
  web_url              String?                @db.VarChar
  latitude_coord       Float?
  longitude_coord      Float?
  area_id              Int                    @db.SmallInt
  areas                areas                  @relation(fields: [area_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  tapas                tapas[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model areas {
  id                   Int                     @id @default(autoincrement()) @db.SmallInt
  created_at           DateTime                @default(now()) @db.Timestamptz(6)
  name                 String                  @db.VarChar
  bars                 bars[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model tags {
  id                    Int                     @id @default(autoincrement()) @db.SmallInt
  created_at            DateTime                @default(now()) @db.Timestamptz(6)
  name                  String?                 @db.VarChar
  tags_tapas            tags_tapas[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model tags_tapas {
  created_at            DateTime                @default(now()) @db.Timestamptz(6)
  tapa_id               Int                     @db.SmallInt
  tag_id                Int
  tags                  tags?                   @relation(fields: [tag_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  tapas                 tapas?                  @relation(fields: [tapa_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([tapa_id, tag_id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model categories {
  id                    Int                     @id @default(autoincrement()) @db.SmallInt
  created_at            DateTime                @default(now()) @db.Timestamptz(6)
  name                  String                  @db.VarChar
  tapas                 tapas[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model profiles {
  id                    String                   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  username              String                   @db.VarChar(256)
  password              String                   @db.VarChar(256)

}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model tapas {
  id                    Int                     @id @default(autoincrement()) @db.SmallInt
  created_at            DateTime                @default(now()) @db.Timestamptz(6)
  name                  String                  @db.VarChar
  price                 Float
  description           String?                 @db.VarChar
  image_url             String?                 @db.VarChar
  views                 Int?                    @default(0)
  rating                Int?                    @default(0)
  bar_id                Int                     @db.SmallInt
  category_id           Int                     @db.SmallInt
  tags_tapas            tags_tapas[]
  bars                  bars                    @relation(fields: [bar_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  categories            categories              @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}
